<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>From Me to You</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/icon.png" />
    <link rel="shortcut icon" href="/icon.ico" />

    <!-- Viewport settings -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />

    <!-- SEO Meta Tags -->
    <meta name="description" content="A simple way to share your feelings, one letter at a time." />
    <meta name="keywords" content="From Me to You, crypticsy, cryptic, cryticsy, letters, digital letters, send letter" />
    <meta name="robots" content="index,follow" />
    <meta name="author" content="From Me to You" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="7 days" />

    <!-- Social Media Meta Tags -->
    <meta property="og:title" content="From Me to You" />
    <meta property="og:description" content="A simple way to share your feelings, one letter at a time." />
    <meta
      property="og:image"
      content="https://crypticsy.github.io/from-me-to-you/home_screen.png"
    />
    <meta property="og:url" content="https://crypticsy.github.io/from-me-to-you/" />
    <meta property="og:type" content="website" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="627" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="From Me to You" />
    <meta name="twitter:description" content="A simple way to share your feelings, one letter at a time." />
    <meta
      property="twitter:image"
      content="https://crypticsy.github.io/from-me-to-you/home_screen.png"
    />

    <!-- Mobile Web Application Meta -->
    <meta name="mobile-web-app-title" content="From Me to You" />
    <meta name="mobile-web-app-capable" content="yes" />

    <!-- Google Fonts Preconnection -->
    <link rel="preconnect" href="https://fonts.googleapis.com" async />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin async />
    <link
      href="https://fonts.googleapis.com/css2?family=Homemade+Apple&family=Caveat:wght@400;500;600;700&family=Indie+Flower&family=Dancing+Script:wght@400;500;600;700&family=Shadows+Into+Light&display=swap"
      rel="stylesheet"
      async
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Figtree:wght@300;400;500;600;700;800&family=Roboto+Mono&display=swap"
      rel="stylesheet"
      async
    />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      jQuery(function () {
        var markers = $(".marker"); // marker selector
        var widthGain = 1; // 1 default
        var heightGain = 1; // 1 default

        // repeat for all markers
        markers.each(function () {
          // Define variables
          var marker = $(this),
            width = 2 * marker.width(),
            height = 3 * marker.height(),
            ns = "http://www.w3.org/2000/svg";

          // if the svg element doesn't exist, create it
          var svg = document.createElementNS(ns, "svg");

          // Also providing attrs for width and height of the svg element
          $(svg)
            .css({
              width: width,
              height: height,
              transform:
                "scale(" +
                (2 * widthGain * width) / height +
                "," +
                heightGain +
                ")",
            })
            .attr({
              width: width,
              height: height,
              viewBox: "-1 -1 2 2",
            });

          // attach it to the marker element
          marker[0].appendChild(svg);

          // create the path element
          var path = document.createElementNS(ns, "path");

          // Set path attributes and styles
          $(path).attr({
            pathLength: 100,
            "vector-effect": "non-scaling-stroke",
          });
          svg.appendChild(path);

          // when creating the element the offset is initialized, however, because of the transition we have to hide it untill it disappears
          setCircle(false);
          setCircle(false);

          // generate a new circle and show path on mouse hover
          marker.mouseover(function () {
            setCircle(true);
          });

          // this function handles path drawing, it uses the circlePath() function that has tunable inputs - see the codePen https://codepen.io/spencerthayer/pen/nhjwu on how to tune them
          function setCircle(show_element) {
            if (show_element) {
              $(path).css("visibility", "visible");
            } else {
              $(path).css("visibility", "hidden");
            }

            var pathLength = 1000 * path.getTotalLength();

            // Set path attributes and styles
            $(path)
              .attr({
                d: circlePath(-0.15, 0.05, 150, 190, 0.05, 0.3),
              })
              .attr({
                "stroke-dasharray": pathLength,
                "stroke-dashoffset": pathLength,
              });
          }

          // generates a circle path - see https://codepen.io/spencerthayer/pen/nhjwu
          function circlePath(dr_min, dr_max, θ0_min, θ0_max, dθ_min, dθ_max) {
            var c = 0.551915024494,
              β = Math.atan(c),
              d = Math.sqrt(c * c + 1 * 1),
              r = 0.9,
              θ =
                ((θ0_min + Math.random() * (θ0_max - θ0_min)) * Math.PI) / 180,
              path = "M";

            path += [r * Math.sin(θ), r * Math.cos(θ)];
            path += " C" + [d * r * Math.sin(θ + β), d * r * Math.cos(θ + β)];

            for (var i = 0; i < 4; i++) {
              θ +=
                (Math.PI / 2) *
                (1 + dθ_min + Math.random() * (dθ_max - dθ_min));
              r *= 1 + dr_min + Math.random() * (dr_max - dr_min);
              path +=
                " " +
                (i ? "S" : "") +
                [d * r * Math.sin(θ - β), d * r * Math.cos(θ - β)];
              path += " " + [r * Math.sin(θ), r * Math.cos(θ)];
            }
            return path;
          }
        });
      });
    </script>
  </body>
</html>
